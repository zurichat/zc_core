
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Swagger UI</title>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Source+Code+Pro:300,600|Titillium+Web:400,600,700" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.24.2/swagger-ui.css" >
  <style>
    html
    {
      box-sizing: border-box;
      overflow: -moz-scrollbars-vertical;
      overflow-y: scroll;
    }
    *,
    *:before,
    *:after
    {
      box-sizing: inherit;
    }

    body {
      margin:0;
      background: #fafafa;
    }
  </style>
</head>
<body>

<div id="swagger-ui"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.24.2/swagger-ui-bundle.js"> </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.24.2/swagger-ui-standalone-preset.js"> </script>
<script>
window.onload = function() {

  var spec = {
    "components": {
        "parameters": {
            "organization_id": {
                "in": "path",
                "name": "organization_id",
                "required": true,
                "schema": {
                    "type": "integer"
                }
            },
            "user_id": {
                "in": "path",
                "name": "user_id",
                "required": true,
                "schema": {
                    "type": "string"
                }
            }
        },
        "schemas": {
            "CreateUserResponse": {
                "properties": {
                    "data": {
                        "properties": {
                            "InsertedID": {
                                "example": "6137a5af52efebbea2739c71",
                                "type": "string"
                            },
                            "verification_code": {
                                "example": 123456,
                                "type": "string"
                            }
                        },
                        "type": "object"
                    },
                    "message": {
                        "example": "user created",
                        "type": "string"
                    },
                    "status": {
                        "example": 200,
                        "type": "number"
                    }
                },
                "type": "object"
            },
            "DeleteUser": {
                "properties": {
                    "data": {
                        "example": null,
                        "type": "string"
                    },
                    "message": {
                        "example": "user deleted successfully",
                        "type": "string"
                    },
                    "status": {
                        "example": 200,
                        "type": "number"
                    }
                },
                "type": "object"
            },
            "Error": {
                "properties": {
                    "message": {
                        "type": "string"
                    },
                    "status": {
                        "format": "int32",
                        "type": "integer"
                    }
                },
                "required": [
                    "status",
                    "message"
                ],
                "type": "object"
            },
            "FullUser": {
                "properties": {
                    "created_at": {
                        "example": "2021-09-07 11:22:06.932180",
                        "type": "string"
                    },
                    "deleted_at": {
                        "example": "0001-01-01 00:00:00",
                        "type": "string"
                    },
                    "email": {
                        "example": "janedoe@email.com",
                        "type": "string"
                    },
                    "email_verification": {
                        "properties": {
                            "expired_at": {
                                "example": "0001-01-01 00:00:00",
                                "type": "string"
                            },
                            "id": {
                                "example": "61374b5e7ccea12370c5adec",
                                "type": "string"
                            },
                            "token": {
                                "example": null,
                                "type": "string"
                            },
                            "verified": {
                                "example": false,
                                "type": "boolean"
                            }
                        },
                        "type": "object"
                    },
                    "first_name": {
                        "example": "Jane",
                        "type": "string"
                    },
                    "id": {
                        "example": "61374b5e7ccea12370c5adec",
                        "type": "string"
                    },
                    "last_name": {
                        "example": "Doe",
                        "type": "string"
                    },
                    "password": {
                        "example": "$2a$14$Nem0fMPQbLUOOcZgaLt/WOUoQDs/Cb9EhX71440ROLanZAom0Da5G",
                        "type": "string"
                    },
                    "password_resets": {
                        "example": null,
                        "type": "string"
                    },
                    "phone": {
                        "example": "0123456789",
                        "type": "string"
                    },
                    "settings": {
                        "example": null,
                        "type": "string"
                    },
                    "time_zone": {
                        "example": "",
                        "type": "string"
                    },
                    "updated_at": {
                        "example": "0001-01-01 00:00:00",
                        "type": "string"
                    },
                    "workspace_profiles": {
                        "example": null,
                        "type": "string"
                    },
                    "workspaces": {
                        "example": null,
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "UpdateUser": {
                "properties": {
                    "data": {
                        "properties": {
                            "MatchedCount": {
                                "example": 1,
                                "type": "integer"
                            },
                            "ModifiedCount": {
                                "example": 1,
                                "type": "integer"
                            },
                            "UpsertedCount": {
                                "example": 0,
                                "type": "integer"
                            },
                            "UpsertedID": {
                                "example": null,
                                "type": "string"
                            }
                        },
                        "type": "object"
                    },
                    "message": {
                        "example": "user created",
                        "type": "string"
                    },
                    "status": {
                        "example": 200,
                        "type": "number"
                    }
                },
                "type": "object"
            },
            "User": {
                "properties": {
                    "email": {
                        "type": "string"
                    },
                    "email_verified": {
                        "type": "boolean"
                    },
                    "first_name": {
                        "type": "string"
                    },
                    "last_name": {
                        "type": "string"
                    },
                    "password": {
                        "type": "string"
                    },
                    "phone_number": {
                        "type": "number"
                    }
                },
                "type": "object"
            },
            "UserOrgs": {
                "properties": {
                    "data": {
                        "properties": {
                            "id": {
                                "example": "61408b3e009d394a85088ba3",
                                "type": "string"
                            },
                            "img": {
                                "example": [
                                    "https://imagelocation.com/image.png",
                                    "https://imagelocation.com/image.png"
                                ],
                                "type": "array"
                            },
                            "isOwner": {
                                "example": false,
                                "type": "boolean"
                            },
                            "logo_url": {
                                "example": "https://imagelocation.com/image.png",
                                "type": "string"
                            },
                            "name": {
                                "example": "ZuriHNG",
                                "type": "string"
                            },
                            "workspace_url": {
                                "example": "zurichat-ssr9730.zurichat.com",
                                "type": "string"
                            }
                        },
                        "type": "object"
                    },
                    "message": {
                        "example": "user organizations retrieved successfully",
                        "type": "string"
                    },
                    "status": {
                        "example": 200,
                        "type": "number"
                    }
                },
                "type": "object"
            },
            "UsersResponse": {
                "properties": {
                    "data": {
                        "items": {
                            "$ref": "#/components/schemas/FullUser"
                        },
                        "type": "array"
                    },
                    "message": {
                        "type": "string"
                    },
                    "status": {
                        "type": "number"
                    }
                },
                "type": "object"
            },
            "VerifyEmail": {
                "properties": {
                    "message": {
                        "example": "email address is not valid",
                        "type": "string"
                    },
                    "status": {
                        "example": 400,
                        "type": "number"
                    }
                },
                "type": "object"
            }
        },
        "securitySchemes": {
            "bearerAuth": {
                "scheme": "bearer",
                "type": "http"
            },
            "cookieAuth": {
                "in": "cookie",
                "name": "JSESSIONID",
                "type": "apiKey"
            }
        }
    },
    "info": {
        "contact": {
            "email": "developer@zuri.chat"
        },
        "description": "Zuri Chat is an open source slack clone. However, it offers a lot more functionality via a plugin system where each room can be provided by a different plugin provider.",
        "title": "Zuri Chat Core API (Users Endpoints)",
        "version": "1.0.0"
    },
    "openapi": "3.0.0",
    "paths": {
        "/users": {
            "get": {
                "description": "Retrieves all created users saved to the DB",
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UsersResponse"
                                }
                            }
                        },
                        "description": "Returns information about all users"
                    }
                },
                "summary": "Retrieves all users",
                "tags": [
                    "Users"
                ]
            },
            "post": {
                "description": "Creates a new user given a request body of required key-value pairs. Returns ID of created user",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CreateUserResponse"
                                }
                            }
                        },
                        "description": "Returns ID of created user",
                        "links": {
                            "UserID": {
                                "operationId": "getUserID",
                                "parameters": {
                                    "user_id": "$response.body#/data/InsertedID"
                                }
                            }
                        }
                    },
                    "400": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/VerifyEmail"
                                }
                            }
                        },
                        "description": "Invalid user email"
                    },
                    "422": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "example": "EOF",
                                            "type": "string"
                                        },
                                        "status": {
                                            "example": 422,
                                            "type": "number"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        },
                        "description": "Unprocessable entity"
                    },
                    "default": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        },
                        "description": "Default error response"
                    }
                },
                "summary": "Create a new user",
                "tags": [
                    "Users"
                ]
            }
        },
        "/users/{email}/organizations": {
            "get": {
                "description": "retrive all organizations a user belongs to",
                "operationId": "getUserOrgs",
                "parameters": [
                    {
                        "in": "path",
                        "name": "email",
                        "required": true,
                        "schema": {
                            "format": "email",
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UserOrgs"
                                }
                            }
                        },
                        "description": "User's organization(s) retrieved successfully"
                    },
                    "404": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": "user with email user1@gmail.com has no organization",
                                    "type": "string"
                                }
                            }
                        },
                        "description": "No record found"
                    },
                    "500": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        },
                        "description": "Someting went wrong"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    },
                    {
                        "bearerAuth": []
                    }
                ],
                "summary": "Get a users organizations",
                "tags": [
                    "Users"
                ]
            }
        },
        "/users/{user_id}": {
            "delete": {
                "parameters": [
                    {
                        "$ref": "#/components/parameters/user_id"
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/DeleteUser"
                                }
                            }
                        },
                        "description": "User was successfully deactivated"
                    },
                    "404": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        },
                        "description": "No user with the specified user_id was found"
                    },
                    "500": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        },
                        "description": "Something went wrong"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    },
                    {
                        "cookieAuth": []
                    }
                ],
                "summary": "Deactivates a user's account",
                "tags": [
                    "Users"
                ]
            },
            "get": {
                "parameters": [
                    {
                        "$ref": "#/components/parameters/user_id"
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/FullUser"
                                }
                            }
                        },
                        "description": "Returns the full info about a user"
                    },
                    "404": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        },
                        "description": "No user with the specified user_id was found"
                    },
                    "500": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        },
                        "description": "Something went wrong"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    },
                    {
                        "bearerAuth": []
                    }
                ],
                "summary": "Retrieves the information about a user",
                "tags": [
                    "Users"
                ]
            },
            "patch": {
                "description": "Updates existing user fields - first_name, last_name, phone",
                "operationId": "getUserID",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/user_id"
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UpdateUser"
                                }
                            }
                        },
                        "description": "User was successfully updated"
                    },
                    "404": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        },
                        "description": "No user with the specified user_id was found"
                    },
                    "500": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        },
                        "description": "Someting went wrong"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    },
                    {
                        "bearerAuth": []
                    }
                ],
                "summary": "Updates the details of a user",
                "tags": [
                    "Users"
                ]
            }
        }
    },
    "servers": [
        {
            "description": "Zuri Chat Core API",
            "url": "https://api.zuri.chat/"
        }
    ],
    "tags": [
        {
            "description": "Controls user registration, login and password recovery",
            "name": "user"
        }
    ]
};

  // Build a system
  const ui = SwaggerUIBundle({
    spec: spec,
    dom_id: '#swagger-ui',
    deepLinking: true,
    presets: [
      SwaggerUIBundle.presets.apis,
      SwaggerUIStandalonePreset
    ],
    plugins: [
      SwaggerUIBundle.plugins.DownloadUrl
    ],
    layout: "StandaloneLayout"
  })

  window.ui = ui
}
</script>
</body>

</html>
